<!DOCTYPE html>
<html>
<head>
	<title>ModBot GUI</title>
	<!-- IMPORTS -->
	<link rel="stylesheet" href="../css/general.css"/>
	<link rel="stylesheet" href="../css/vendor/prettify/prettify.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<!-- END IMPORTS -->
</head>

<body>
	<header>
		<h1>MiniBot GUI v2.0.1</h1><br>
		A GUI to control Cornell Cup's Minibot.
	</header>

	<!-- COLUMNS -->
	<div class="row">
		<div class="col-md-5 col-md-offset-1">
			<!-- ADDBOT -->
			<div class="well">
				<h4>Add a bot:</h4>
				IP: <input type="text" name="ip" id="ip"><br/>
				Port: <input type="text" name="port" id="port" value="10000"><br/>
				Name: <input type="text" name="name" id="name"><br/>
				Type:
				<select id="bot-type" name="type">
					<option value="minibot">minibot</option>
					<option value="modbot">modbot</option>
					<option value = "simulator.simbot">simulator.simbot</option>
				</select>
				<button id="addBot">add bot</button>
				<button id = "updateLocs"> Run simulator </button>
				<br>
				<h4>Add a discovered bot:</h4>
				<div id="discovered"></div>
			</div>
			<!-- VIEW -->
			<div class="well view">
				<h4>View:
					<input type="checkbox" id="vision-poll"> Poll for Vision Data<br>
					Scale (10-100%): <input style="width:10vw;" id="scale" type="range" name="power" min="10" max="100" value="100">
				</h4>
				<br>
				<div id="view" style="min-height:550px;"></div>
			</div>
		</div>
		<div class="col-md-5">
			<!-- SCENARIOS -->
			<div class="well">
				<h4>Scenarios:</h4><br>
				Scenario name:<input type="text" id="scenarioname"
									 value="scenario1"><br>
				Scenario viewer: <textarea rows="4" cols="90" name="scenario"
										   id="scenario" style="display:block">[{"type":	"simulator.simbot",
		"position":"[2,2]", "angle":0},{"type":	"scenario_object",
		"position":"[5,5]", "angle":45, "size":1},{"type": "scenario_object", "position":"[3,3]", "angle":45, "size": 1}]</textarea>
				<button id="addScenario">add scenario to world</button>
				<button id="loadScenario">load scenario from file</button>
				<button id="saveScenario">save scenario to file</button>
				<br>
				<button id = "showOccupancyMatrix">Occupancy Matrix</button>
			</div>
			<!-- CONTROLS -->
			<div class="well">
				<h4>Movement controls:</h4>
				Choose bot:<br>
				<select id="botlist" name="bots">
					<option value="">-- Choose a bot --</option>
					<option value="0">(DEBUG) Sim Bot</option>
				</select>

				<button class="controls" id="removeBot">remove</button><br>
				Power (0-100): <input id="power" style="width:10vw;" type="range" name="power" min="0" max="100" value="50">
				<br>
				<b>Directions:</b><br>
				<table style="text-align:center;">
					<tr>
						<td class="controlgrid"><button class="btn" id="ccw">turn CCW</button></td>
						<td class="controlgrid"><button class="btn" id="fwd">forward</button></td>
						<td class="controlgrid"><button class="btn" id="cw">turn CW</button></td>
					</tr>
					<tr>
						<td class="controlgrid"><button class="btn" id="lft">left</button></td>
						<td class="controlgrid"><button class="btn btn-danger" id="stop" style="background:red;">STOP</button></td>
						<td class="controlgrid"><button class="btn" id="rt">right</button></td>
					</tr>
					<tr>
						<td class="controlgrid"><button class="btn btn-success" id="log">log data</button></td>
						<td class="controlgrid"><button class="btn" id="bck">backward</button></td>
						<td class="controlgrid"></td>
					</tr>
					<tr>
						<td></td>
						<td>
							<input type="checkbox" id="keyboard-controls"> Enable Keyboard Controls
						</td>
						<td></td>
					</tr>
					<tr>
						<td><button id="xbox-on">Start Xbox</td>
						<td><button id="xbox-off">Stop Xbox</td>
						<td></td>
					</tr>
					<tr>
						<td><input type="text" id="kv_key" placeholder="Key (e.g. WHEELS)"></td>
						<td><input type="text" id="kv_value" placeholder="Value (e.g. 10,10)"></td>
						<td><button id="sendkv" onclick="sendKV()">Send KV</button></td>
					</tr>
				</table>
			</div>
		</div>
	</div>
	<br>
	<div class = "row">
		<div class= "col-md-6">
			<div id="blocklyDiv" style="margin:0; margin-left:3.5%; height:80vh; width: 50vw;"></div>
		</div>
		<div class= "col-md-6">
			<!-- BEGINNING OF BLOCKLY CODE -->
			<div class="box" style = "padding: 0; margin-top: 0">
				<!-- BLOCKLY TOOLBOX -->
				<!--<div id="blocklyDiv" style="margin:0; height: 60vh; width: 80vw;"></div>-->
				<xml id="toolbox" style="display:none;">
					<block type="controls_if"></block>
					<block type="variables_set"></block>
					<block type="variables_get"></block>
					<block type="logic_compare"></block>
					<block type="controls_repeat_ext"></block>
					<block type="math_number"></block>
					<block type="math_arithmetic"></block>
					<block type="text"></block>
					<block type="text_print"></block>

					<!-- ADDING CUSTOM BLOCKS -->
					<block type="move"></block>
					<block type="turn"></block>
					<block type="setwheelpower"></block>
					<block type="wait"></block>
				</xml>

				<!-- SUBMIT/DOWNLOAD/UPLOAD FUNCTIONALITIES -->
				<!-- download script-->
				<form id="dwn" onsubmit="download(this['name'].value, this['text'].value)">
					<input type="text" name="name" value="myBlocklyCode.py">
					<textarea name="text" size="100" cols="100" rows="40" name="data" id="data"></textarea><br>
					<input type="submit" value="Download">
				</form>
				<!-- send script -->
				<input type="submit" value="Run" id="send"><br>
				<!-- upload script -->
				<form type=POST>
					<input
							type="file"
							id="upload"
							multipleSize="1"
							accept=".py"
					/>
				</form>
			</div>
		</div>
	</div>

	<!-- basic imports -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="http://pixijs.download/release/pixi.min.js"></script>

	<!-- blockly imports -->
	<script src="../js/vendor/blockly/blockly_compressed.js"></script>
	<script src="../js/vendor/blockly/javascript_compressed.js"></script>
	<script src="../js/vendor/blockly/python_compressed.js"></script>
	<script src="../js/vendor/blockly/blocks_compressed.js"></script>
	<script src="../js/vendor/blockly/en.js"></script>
	<script src="../js/vendor/prettify/prettify.js"></script>

	<!-- IMPORT CUSTOM BLOCKS -->
	<script type="text/javascript" src="../js/blocks/custom_blocks.js"></script>
	<script type="text/javascript" src="../js/blocks/custom_json.js"></script>

	<!-- manual scripts -->
	<script src="../js/blockly.js"></script>
	<script src="../js/interface.js"></script>
	<script src="../js/view.js"></script>
</body>
</html>
